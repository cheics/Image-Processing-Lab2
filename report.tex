\documentclass[article, 1.5space, letterpaper, 12pt, oneside, header, footer]{SydeClass}
\graphicspath{{images/}}
\usepackage{subfigure}
\usepackage{eqnarray}


% --------- Title Info -----------
\titlestyle{design} % used in SydeTitle.tex. Can equal one of the following values: design, work

\title{Lab 1}
\subtitle{Fundamentals of Image Processing}

\coursecode{SYDE 475}
\department{Systems Design Engineering}

\author{Colin Heics, 20240543}
\authorheader{C. Heics}
\authortwo{Neil Sokol, 20265064}
\authorheadertwo{N. Sokol}

\date{\today}
\instructor{Alex Wong}

\subsectionfont{\normalsize}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{1}

\input{matlabFormating}

% ############  ############
\begin{document}

% ---------- Title ------------
\input{SydeTitle}

% ############ Chapters ############
\pagenumbering{arabic}

\section{Noise Generation}

When evaluating image processing algorithms, it is important to see how they perform under various levels of noise.


\begin{figure}[ht]
\centering
	\subfigure[Original image]{
	\includegraphics[width=0.45\linewidth]{question2/toy}
	}
\end{figure}

\begin{figure}[ht]
\centering
	\subfigure[Image with Gaussian Noise]{
	\includegraphics[width=0.45\linewidth]{question2/gauss}
	}
	\subfigure[Histogram of Gaussian Noise Image]{
	\includegraphics[width=0.45\linewidth]{question2/gauss_hist}
	}
	\subfigure[Image with Speckle Noise]{
	\includegraphics[width=0.45\linewidth]{question2/speckle}
	}
	\subfigure[Histogram of Speckle Noise Image]{
	\includegraphics[width=0.45\linewidth]{question2/speckle_hist}
	}
	\subfigure[Image with Salt and Pepper]{
	\includegraphics[width=0.45\linewidth]{question2/salt}
	}
	\subfigure[Histogram of Salt and Pepper Image]{
	\includegraphics[width=0.45\linewidth]{question2/salt_hist}
	}
	\caption{Toy image with Gaussian, Salt and Pepper, and Speckle Noise}
	\label{fig:noiseGeneration.toy}
\end{figure}
 

\subsection{Discussion questions}

\subsubsection{ Describe each of the histograms in the context of the corresponding noise models. Why do they appear
that way?}
In the gaussian histogram, image intensities are grouped in gaussian distributions centered around the two intesity values of the original image. It appears the way it is because as additive noise, all that is being done is the gaussian distribution is added to the image. Speckled noise, which is multiplicative, appears to be a flat distribution centered around the original intensities. There is more variance around the higher original intesity value, which is due to the multiplicative nature of speckle noise.

\subsubsection{Are there visual differences between the noise contaminated images? What are they? Why}
There are some visual differences. The gaussian has a lot more extra bright or extra dark pixels, while speckled has more that are more off by a smaller intensity. This is because the gaussian is additive noise, and the speckled is multiplicative.

\subsubsection{In the speckle noise case, what is the underlying distribution used? Can you tell from the histogram?
How?}
The underlying distribution is uniform. You can tell from the histogram because the intensities are distributed roughly evenly (i.e. same number of pixels). 

\subsubsection{In the speckle noise case, you will notice that the peaks of the histogram are no longer of the same
height as they were in the original image. Also, the spread around each of the peaks is also different
from each other. Why? Hint: Noise is multiplicative}
Since the noise is multiplicative, it is proportional to the local grey level in the image. i.e. there will be a wider spread of values around higher grey levels, as we can see with the right-most spread having a higher variance.



\section{Noise Reduction in the Spatial Domain}

\clearpage
\subsection{Section0}
\begin{figure}[ht]
\centering
	\subfigure[Original image]{
	\includegraphics[width=0.45\linewidth]{question3/0_lenaBase}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/0_lenaBase_hist}
	}
	\subfigure[Image with gaussian noise $\mu$=0, $\sigma$=0.002; PSNR +26.99dB]{
	\includegraphics[width=0.45\linewidth]{question3/0_lenaNoisyGauss}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/0_lenaNoisyGauss_hist}
	}
	\caption{Images with gaussian noise}
	\label{fig:gaussianNoise}
\end{figure}


\clearpage
\subsection{Section1}
\begin{figure}[ht]
\centering
	\subfigure[Denoised image with 3x3 average kernel; PSNR +30.63dB]{
	\includegraphics[width=0.45\linewidth]{question3/1_lenaDeNoisyGauss3x3avg}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/1_lenaDeNoisyGauss3x3avg_hist}
	}
	
	\caption{Images with gaussian noise}
	\label{fig:gaussianNoise}
\end{figure}

\clearpage
\subsection{Section2}
\begin{figure}[ht]
\centering
	\subfigure[Denoised image with 7x7 average kernel; PSNR +26.23dB]{
	\includegraphics[width=0.45\linewidth]{question3/2_lenaDeNoisyGauss7x7avg}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/2_lenaDeNoisyGauss7x7avg_hist}
	}
	
	\caption{Images with gaussian noise}
	\label{fig:gaussianNoise}
\end{figure}

\clearpage
\subsection{Section3}
\begin{figure}[ht]
\centering
	\subfigure[Denoised image with 7x7 gaussian kernel; PSNR +30.82dB]{
	\includegraphics[width=0.45\linewidth]{question3/3_lenaDeNoisyGauss7x7avgGauss}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/3_lenaDeNoisyGauss7x7avgGauss_hist}
	}
	
	\caption{Images with gaussian noise}
	\label{fig:gaussianNoise}
\end{figure}


\clearpage
\subsection{Section4}

\begin{figure}[ht]
\centering
	\subfigure[S\&P noise on original image; PSNR +18.41dB]{
	\includegraphics[width=0.45\linewidth]{question3/4_lenaNoisySp}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/4_lenaNoisySp_hist}
	}
\end{figure}

\begin{figure}[ht]
\centering	
	\subfigure[S\&P denoised with 7x7 average kernel; PSNR +25.52dB]{
	\includegraphics[width=0.45\linewidth]{question3/4_lenaDeNoisySp_7x7Avg}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/4_lenaDeNoisySp_7x7Avg_hist}
	}
\end{figure}

\begin{figure}[ht]
\centering
	\subfigure[S\&P denoised with 7x7 gaussian kernel; PSNR +27.08dB]{
	\includegraphics[width=0.45\linewidth]{question3/4_lenaDeNoisySp_7x7AvgGauss}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/4_lenaDeNoisySp_7x7AvgGauss_hist}
	}
\end{figure}


\clearpage
\subsection{Section5}

\begin{figure}[ht]
\centering
	\subfigure[S\&P denoised with median filter; PSNR +34.47]{
	\includegraphics[width=0.45\linewidth]{question3/5_lenaDeNoisyMedian}
	}
	\subfigure[Histogram]{
	\includegraphics[width=0.45\linewidth]{question3/5_lenaDeNoisyMedian_hist}
	}
\end{figure}

\clearpage


\subsection{Discussion questions}

\subsubsection{Compare the visual difference between the noisy image and the denoised image. How well did it
work? Why? Did the PSNR decrease?}
The denoised image appears blurrier. The denoising worked rather well, as the PSNR is higher in the denoised image. This is because gaussian is additive noise, and averaging works well at removing additive noise.

\subsubsection{Compare the histograms of the noise-free, noisy, and denoised images. What happened? Why}
The noisy histogram is missing the sharp peaks of the noise free image, instead smoothing it closer to an overall gaussian distributed shape (due to the additive noise). The averaging filter partially restores this histogram pattern.


\subsubsection{Based on visual quality of the denoised image, what are the benefits and drawbacks associated with
the average filter}
While overall noise is reduced and the PSNR is higher, the image is of reduced visual quality compared to the original (i.e. blurry).


\subsubsection{Compare the visual difference between the denoised image from the 7x7 filtering kernel and the
denoised image from the 3x3 filtering kernel. Are there any differences? Why? Did the PSNR
decrease? Why}
The 7x7 filtered image is even blurrier than the 3x3 filtered one.



\subsubsection{Compare the histograms of the two denoised images. What are the differences? Why}


\subsubsection{Based on visual quality of the denoised image, what are the benefits and drawbacks associated with
using a larger window size?}


\subsubsection{Compare the visual difference between the denoised image from the Gaussian ?ltering kernel and the
denoised images from the averaging filter kernels. Are there any differences? Why? Did the PSNR
decrease? Why}


\subsubsection{Compare the histograms of the denoised image using the Gaussian filtering kernel and the denoised
images from the averaging ?lter kernels. What are the differences? Why?}


\subsubsection{Based on visual quality of the denoised image, what are the benefits and drawbacks associated with
using a Gaussian kernel as opposed to an averaging kernel?}


\subsubsection{How does the averaging filter and Gaussian ?ltering methods perform on the noisy image in terms of
noise reduction? Explain in terms of visual quality as well as PSNR. Why do we get such results?}


\subsubsection{Compare the histograms of the denoised images with that of the noisy image. What characteristics
are present in all of the histograms? Why?}


\subsubsection{How does the denoised image produced using the median filter compare with the denoised images
produced using averaging filter and Gaussian filtering methods? Explain in terms of visual quality
as well as PSNR. Why do we get such results with median filter when compared to the other spatial
filtering methods?}


\section{Sharpening in the spatial domain}

\subsection{Section1}
\begin{figure}[ht]
\centering
	\subfigure[Base Cameraman image]{
	\includegraphics[width=0.45\linewidth]{question4/1_camBase}
	}
	\subfigure[Original image - Blurred image]{
	\includegraphics[width=0.45\linewidth]{question4/1_cam_highBoost}
	}
\end{figure}

\subsection{Section2}
\begin{figure}[ht]
\centering
	\subfigure[Highboosted image, A=1.0]{
	\includegraphics[width=0.45\linewidth]{question4/2_cam_highBoost_10}
	}
\end{figure}


\subsection{Section3}
\begin{figure}[ht]
\centering
	\subfigure[Highboosted image, A=0.5]{
	\includegraphics[width=0.45\linewidth]{question4/3_cam_highBoost_05}
	}
\end{figure}

\begin{figure}[ht]
\centering
	\subfigure[Highboosted image, A=1.5]{
	\includegraphics[width=0.45\linewidth]{question4/3_cam_highBoost_15}
	}
	\subfigure[Highboosted image, A=4.0]{
	\includegraphics[width=0.45\linewidth]{question4/3_cam_highBoost_40}
	}
\end{figure}

\appendix
\newpage

% -------- Bibliography --------
%\addcontentsline{toc}{chapter}{\hspace{13pt} References}
\bibliography{refs}

\end{document}  